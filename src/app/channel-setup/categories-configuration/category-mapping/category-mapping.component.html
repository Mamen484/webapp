<div fxLayout="row" fxLayoutAlign="start center" class="category-mapping-header">
    <div i18n fxFlex class="mat-body-1 card-label">Assign a category</div>
    <button mat-stroked-button color="accent" (click)="usePreviousMapping()" *ngIf="hasCachedMapping" i18n>Use previous
    </button>
</div>
<mat-card>
    <mat-card-content>
        <div class="category-mapping" fxLayout="column" fxLayoutGap="20px">
            <div fxLayout="row" fxLayoutAlign="start start" fxLayoutGap="20px">
                <mat-form-field appearance="outline" color="accent" fxFlex>
                    <mat-label i18n>Category mapping</mat-label>
                    <input type="search" matInput [formControl]="searchChannelCategoryControl" (keyup)="watchDeletion()"
                           [matAutocomplete]="auto">
                    <button *ngIf="searchChannelCategoryControl.value" mat-button matSuffix mat-icon-button aria-label="Clear" (click)="removeValue()">
                        <mat-icon>close</mat-icon>
                    </button>
                    <mat-error *ngIf="searchChannelCategoryControl.hasError('categoryMappingEmpty')">Please select
                        category from list
                    </mat-error>
                    <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn"
                                      (optionSelected)="chooseCategory($event.option.value)">
                        <mat-option *ngFor="let category of channelCategoryOptions"
                                    [value]="category">{{category.name}}</mat-option>
                    </mat-autocomplete>
                </mat-form-field>
                <button class="save-matching" mat-raised-button i18n color="accent" (click)="saveMatching()">Save
                </button>
            </div>
        </div>
        <mat-progress-bar mode="indeterminate" color="accent" *ngIf="loading"></mat-progress-bar>
    </mat-card-content>
</mat-card>
