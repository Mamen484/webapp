<div class="scrollable-container">
    <div class="mat-title" i18n>API</div>

    <section>
        <div class="mat-caption" i18n>Your API information</div>
        <mat-card>
            <mat-card-content fxLayout="column" fxLayoutGap="10px">
                <div>
                    <div class="mat-body-2" i18n>Token</div>
                    <div class="mat-body-1">{{token}}</div>
                </div>
                <div>
                    <div class="mat-body-2" i18n>Store ID</div>
                    <div class="mat-body-1">{{currentStore.id}}</div>
                </div>
                <div>
                    <div class="mat-body-2" i18n>Store Name</div>
                    <div class="mat-body-1">{{currentStore.name}}</div>
                </div>
            </mat-card-content>
        </mat-card>
    </section>
    <section>
        <div class="mat-caption">Integration</div>
        <mat-card>
            <mat-card-content fxLayout="row" fxLayoutAlign="center center">
                <div fxFlex>
                    <sf-image source="assets/images/zapier-logo.png" width="110px"></sf-image>
                </div>
                <button mat-raised-button color="accent" (click)="goToToZapier()">Connect</button>
            </mat-card-content>
        </mat-card>

    </section>

    <section>
        <div class="mat-caption">
            <div *ngIf="isLoadingResults" class="progress-bar-wrapper">
                <mat-progress-bar mode="indeterminate" color="accent"></mat-progress-bar>
            </div>
            <mat-card class="actions">
                <mat-card-content fxLayout="row">
                    <div fxFlex></div>
                    <button mat-stroked-button color="accent" i18n (click)="openFilters()">Filters</button>
                </mat-card-content>
            </mat-card>
            <div class="table-container mat-elevation-z1">
                <table mat-table [dataSource]="dataSource">

                    <ng-container matColumnDef="id">
                        <th mat-header-cell *matHeaderCellDef i18n> ID</th>
                        <td mat-cell *matCellDef="let element"> {{element.id}} </td>
                    </ng-container>

                    <ng-container matColumnDef="type">
                        <th mat-header-cell *matHeaderCellDef i18n> Type</th>
                        <td mat-cell *matCellDef="let element">
                            <ng-container [ngSwitch]="element.type">
                                <div *ngSwitchCase="ticketType.shipOrder" class="sf-label mat-chip blue" i18n>Ship</div>
                                <div *ngSwitchCase="ticketType.acceptOrder" class="sf-label mat-chip blue" i18n>Accept</div>
                                <div *ngSwitchCase="ticketType.refuseOrder" class="sf-label mat-chip blue" i18n>Refuse</div>
                                <div *ngSwitchCase="ticketType.cancelOrder" class="sf-label mat-chip blue" i18n>Cancel</div>
                                <div *ngSwitchCase="ticketType.refundOrder" class="sf-label mat-chip blue" i18n>Refund</div>
                                <div *ngSwitchCase="ticketType.acknowledgeOrder" class="sf-label mat-chip blue" i18n>Acknowledge</div>
                                <div *ngSwitchCase="ticketType.unacknowledgeOrder" class="sf-label mat-chip blue" i18n>Unacknowledge</div>
                                <div *ngSwitchDefault class="sf-label mat-chip blue">{{ element.type }}</div>
                            </ng-container>
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="state">
                        <th mat-header-cell *matHeaderCellDef i18n> Status</th>
                        <td mat-cell *matCellDef="let element">
                            <sf-ticket-state-label [state]="element.state"></sf-ticket-state-label>
                        </td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;" [class.isBlocked]="!row.isActive"  (click)="showTicketDetails(row.id)"></tr>
                </table>
                <div *ngIf="!isLoadingResults && !dataSource.length" i18n class="no-results mat-body-1">
                    No tickets found.
                </div>
            </div>

            <mat-paginator [pageSize]="pageSize" [length]="resultsLength" [pageSizeOptions]="pageSizeOptions"
                           (page)="pageChanged($event)" [pageIndex]="currentPage" class="mat-elevation-z1"></mat-paginator>

        </div>
    </section>
</div>
